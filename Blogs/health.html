<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Health Camps - Sarvam Trust</title>
  <meta name="description" content="Sarvam Trust's healthcare initiatives serving 500+ rural beneficiaries through medical camps">
  <meta name="keywords" content="NGO, health camps, rural healthcare, medical aid, Tamil Nadu">

  <!-- Favicons -->
  <link href="https://cdn.razorpay.com/logos/KMrKOuvyT8jYJg_large.jpeg" rel="icon">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <style>
    :root {
      --primary-color: #3498db;  /* Doctor Blue */
      --secondary-color: #2980b9; /* Hospital Blue */
      --accent-color: #e74c3c;   /* Emergency Red */
      --text-dark: #2c3e50;     /* Midnight Blue */
      --text-light: #7f8c8d;    /* Gray */
      --light-bg: #f8f9fa;      /* Medical White */
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      color: var(--text-dark);
      overflow-x: hidden;
      background-color: #fff;
      scroll-behavior: smooth;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
    }
    
    /* Hero Section */
    .hero-section {
      position: relative;
      width: 100%;
      height: 100vh;
      min-height: 600px;
      background: linear-gradient(135deg, rgba(52, 152, 219, 0.8), rgba(41, 128, 185, 0.8)), 
                  url('https://images.unsplash.com/photo-1579684385127-1ef15d508118?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80') no-repeat center center/cover;
      display: flex;
      align-items: center;
      color: white;
      overflow: hidden;
    }
    
    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      text-align: center;
    }
    
    .hero-title {
      font-size: 4rem;
      font-weight: 800;
      margin-bottom: 1.5rem;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
      animation: fadeInUp 1s ease-out;
    }
    
    .hero-subtitle {
      font-size: 1.5rem;
      max-width: 800px;
      margin: 0 auto 2rem;
      opacity: 0.9;
      animation: fadeInUp 1s ease-out 0.3s both;
    }
    
    /* Floating Elements Animation */
    .floating-elements {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1;
    }
    
    .floating-element {
      position: absolute;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      filter: blur(30px);
      animation: float 15s infinite linear;
    }
    
    .element-1 {
      width: 300px;
      height: 300px;
      top: 20%;
      left: 10%;
      animation-duration: 20s;
    }
    
    .element-2 {
      width: 200px;
      height: 200px;
      top: 60%;
      left: 70%;
      animation-duration: 25s;
      animation-delay: 5s;
    }
    
    .element-3 {
      width: 150px;
      height: 150px;
      top: 30%;
      left: 50%;
      animation-duration: 18s;
      animation-delay: 2s;
    }
    
    @keyframes float {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(50px, 50px) rotate(10deg); }
      50% { transform: translate(100px, 0) rotate(20deg); }
      75% { transform: translate(50px, -50px) rotate(10deg); }
      100% { transform: translate(0, 0) rotate(0deg); }
    }
    
    /* Blog Content Section */
    .blog-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 80px 20px;
      position: relative;
    }
    
    .article-header {
      margin-bottom: 60px;
      text-align: center;
    }
    
    .article-title {
      font-size: 3rem;
      margin-bottom: 1.5rem;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      position: relative;
      display: inline-block;
    }
    
    .article-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.5s ease;
    }
    
    .article-header:hover .article-title::after {
      transform: scaleX(1);
    }
    
    .article-meta {
      display: flex;
      justify-content: center;
      gap: 20px;
      color: var(--text-light);
      margin-bottom: 2rem;
    }
    
    .article-image {
      width: 100%;
      height: 500px;
      object-fit: cover;
      border-radius: 15px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      margin-bottom: 40px;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }
    
    .article-image:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 30px 60px rgba(0,0,0,0.2);
    }
    
    .article-content {
      max-width: 800px;
      margin: 0 auto;
      font-size: 1.1rem;
      line-height: 1.8;
    }
    
    .article-content p {
      margin-bottom: 1.5rem;
    }
    
    .article-content h3 {
      font-size: 1.8rem;
      margin: 3rem 0 1.5rem;
      color: var(--primary-color);
      position: relative;
      padding-left: 20px;
    }
    
    .article-content h3::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.5rem;
      height: 1.5rem;
      width: 6px;
      background: linear-gradient(var(--primary-color), var(--secondary-color));
      border-radius: 3px;
    }
    
    blockquote {
      font-style: italic;
      font-size: 1.3rem;
      color: var(--text-dark);
      border-left: 4px solid var(--primary-color);
      padding-left: 2rem;
      margin: 2rem 0;
      position: relative;
    }
    
    blockquote::before {
      content: '"';
      position: absolute;
      font-size: 5rem;
      color: rgba(52, 152, 219, 0.1);
      top: -1.5rem;
      left: 0;
      line-height: 1;
    }
    
    /* Image Grid */
    .image-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 3rem 0;
    }
    
    .grid-item {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      height: 250px;
      transition: transform 0.3s ease;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .grid-item:hover {
      transform: scale(1.03);
    }
    
    .grid-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .grid-item:hover img {
      transform: scale(1.1);
    }
    
    .grid-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.7));
      color: white;
      padding: 20px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }
    
    .grid-item:hover .grid-caption {
      transform: translateY(0);
    }
    
    /* Stats Section */
    .stats-section {
      color: black;
      padding: 60px 0;
      margin: 60px 0;
      border-radius: 15px;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(248, 250, 252, 0.9), rgba(248, 250, 252, 0.9));
    }
    
    .stats-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80') center center/cover;
      opacity: 0.1;
      z-index: -1;
    }
    
    .stats-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 30px;
      max-width: 1000px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }
    
    .stat-item {
      text-align: center;
      padding: 30px 20px;
      background: rgba(255,255,255,0.9);
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.4s ease;
      border-bottom: 4px solid transparent;
    }
    
    .stat-item:hover {
      transform: translateY(-10px);
      border-bottom-color: var(--primary-color);
      box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    
    .stat-number {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      transition: all 0.4s ease;
    }
    
    .stat-item:hover .stat-number {
      transform: scale(1.1);
    }
    
    .stat-label {
      font-size: 1rem;
      color: var(--text-dark);
      font-weight: 500;
    }
    
    /* Services Cards */
    .services-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 25px;
      margin: 40px 0;
    }
    
    .service-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    .service-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.1);
    }
    
    .service-card-img {
      height: 180px;
      width: 100%;
      object-fit: cover;
    }
    
    .service-card-body {
      padding: 20px;
    }
    
    .service-card-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--primary-color);
    }
    
    .service-card-text {
      color: var(--text-light);
      font-size: 0.9rem;
    }
    
    /* Call to Action */
    .cta-section {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 80px 0;
      margin: 80px 0;
      border-radius: 15px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .cta-title {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
    }
    
    .cta-text {
      max-width: 700px;
      margin: 0 auto 2rem;
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .cta-btn {
      background: white;
      color: var(--primary-color);
      border: none;
      padding: 15px 40px;
      font-size: 1.1rem;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      font-weight: 600;
    }
    
    .cta-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      background: rgba(255,255,255,0.9);
    }
    
    /* Pulse Animation */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse-effect {
      animation: pulse 2s infinite;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 992px) {
      .hero-title {
        font-size: 3rem;
      }
      
      .stats-container {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .image-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      .hero-section {
        height: auto;
        padding: 100px 0;
      }
      
      .hero-title {
        font-size: 2.5rem;
      }
      
      .hero-subtitle {
        font-size: 1.2rem;
      }
      
      .article-title {
        font-size: 2rem;
      }
      
      .article-image {
        height: 350px;
      }
      
      .image-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 576px) {
      .stats-container {
        grid-template-columns: 1fr;
      }
      
      .services-cards {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="floating-elements">
      <div class="floating-element element-1"></div>
      <div class="floating-element element-2"></div>
      <div class="floating-element element-3"></div>
    </div>
    <div class="hero-content">
      <h1 class="hero-title">Healthcare for All</h1>
      <p class="hero-subtitle">Serving 500+ rural beneficiaries through free medical camps across Tamil Nadu</p>
      <a href="#article" class="btn btn-light btn-lg px-5 py-3 rounded-pill">Learn About Our Work</a>
    </div>
  </section>

  <!-- Blog Content -->
  <main class="blog-content" id="article">
    <article>
      <header class="article-header animate-on-scroll">
        <h2 class="article-title">Health Camps Transforming Rural Communities</h2>
        <div class="article-meta">
          <span><i class="bi bi-calendar"></i> June 2023</span>
          <span><i class="bi bi-person"></i> By Sarvam Medical Team</span>
          <span><i class="bi bi-chat"></i> 8 Comments</span>
        </div>
      </header>
      
      <img src="/Sarvam-NGO/assets/img/health1.jpg" 
           alt="Medical camp in progress" class="article-image animate-on-scroll">
      
      <div class="article-content">
        <p class="animate-on-scroll">Since 2018, Sarvam Trust has been bringing essential healthcare services to doorsteps of rural communities in Tamil Nadu. Our mobile health camps have treated over 500 patients who otherwise have limited access to medical facilities.</p>
        
        <p class="animate-on-scroll">Operating in 12 villages across Namakkal district, our camps provide free consultations, medicines, and health education. Many beneficiaries walk miles to attend these camps, demonstrating the critical need for such initiatives in underserved areas.</p>
        
        <blockquote class="animate-on-scroll">
          "Health is a human right, not a privilege. Our camps ensure no one is denied care due to economic or geographic barriers." - Dr. Karthik, Volunteer Physician
        </blockquote>
        
        <h3 class="animate-on-scroll">Our Comprehensive Services</h3>
        <p class="animate-on-scroll">Each health camp is designed to address multiple healthcare needs:</p>
        
        <div class="image-grid animate-on-scroll">
          <div class="grid-item">
            <img src="/Sarvam-NGO/assets/img/health2.jpg" 
                 alt="Doctor consultation">
            <div class="grid-caption">General Physician Consultations</div>
          </div>
          <div class="grid-item">
            <img src="https://images.unsplash.com/photo-1588776814546-1ffcf47267a5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" 
                 alt="Medicine distribution">
            <div class="grid-caption">Free Medicine Distribution</div>
          </div>
          <div class="grid-item">
            <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" 
                 alt="Health awareness session">
            <div class="grid-caption">Preventive Health Education</div>
          </div>
        </div>
        
        <div class="services-cards animate-on-scroll">
          <div class="service-card">
            <img src="https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" 
                 class="service-card-img" alt="Basic diagnostics">
            <div class="service-card-body">
              <h5 class="service-card-title">Basic Diagnostics</h5>
              <p class="service-card-text">Blood pressure, blood sugar, and BMI screening for early detection of health issues</p>
            </div>
          </div>
          
          <div class="service-card">
            <img src="https://images.unsplash.com/photo-1588776814546-1ffcf47267a5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" 
                 class="service-card-img" alt="Medicine distribution">
            <div class="service-card-body">
              <h5 class="service-card-title">Medicine Kits</h5>
              <p class="service-card-text">Free essential medicines for common ailments</p>
            </div>
          </div>
          
          <div class="service-card">
            <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" 
                 class="service-card-img" alt="Health education">
            <div class="service-card-body">
              <h5 class="service-card-title">Health Education</h5>
              <p class="service-card-text">Workshops on hygiene, nutrition, and disease prevention</p>
            </div>
          </div>
        </div>
        
        <h3 class="animate-on-scroll">Impact Statistics</h3>
        <p class="animate-on-scroll">Our health camps have made measurable differences in community health outcomes:</p>
        
        <div class="stats-section animate-on-scroll">
          <div class="stats-bg"></div>
          <div class="stats-container">
            <div class="stat-item">
              <div class="stat-number">500+</div>
              <div class="stat-label">Patients Treated</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">12</div>
              <div class="stat-label">Villages Covered</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">25</div>
              <div class="stat-label">Doctors Volunteered</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">1500+</div>
              <div class="stat-label">Medicines Distributed</div>
            </div>
          </div>
        </div>
        
        <h3 class="animate-on-scroll">Patient Stories</h3>
        <p class="animate-on-scroll">70-year-old Lakshmi from a remote village had been suffering from untreated hypertension for years. At our camp, she received free medication and regular follow-ups. Today, her blood pressure is under control and she serves as a health ambassador in her community.</p>
        
        <div class="cta-section animate-on-scroll">
          <h3 class="cta-title">Support Our Next Health Camp!</h3>
          <p class="cta-text">Your donation can provide medical care to 50 more villagers who lack access to healthcare</p>
          <button class="cta-btn pulse-effect">Donate Now <i class="bi bi-heart-pulse ms-2"></i></button>
        </div>
        
        <h3 class="animate-on-scroll">Future Goals</h3>
        <p class="animate-on-scroll">We aim to expand our healthcare initiatives with:</p>
        <ul class="animate-on-scroll">
          <li>Monthly specialty camps (eye care, dental, women's health)</li>
          <li>Mobile medical units for remote areas</li>
          <li>Telemedicine facilities</li>
          <li>Community health worker training</li>
        </ul>
      </div>
    </article>
  </main>
  <body class="blog-details-page">

    <!-- Comment Section -->
    <section id="blog-comments" class="blog-comments section py-5 bg-light">
      <div class="container">
        <h4 class="comments-count mb-4 animate__animated animate__fadeIn" id="commentsCount">Loading comments...</h4>
  
        <!-- Comment Form -->
        <div class="comment-form mb-5 animate__animated animate__fadeInUp animate__delay-1s">
          <h5 class="mb-3">Leave a Comment</h5>
          <form id="commentForm">
            <div class="row">
              <div class="col-md-6 mb-3">
                <input type="text" class="form-control animate__animated" id="name" placeholder="Your Name*" required>
              </div>
              <div class="col-md-6 mb-3">
                <input type="email" class="form-control animate__animated animate__delay-1" id="email" placeholder="Your Email (optional)">
              </div>
            </div>
            <div class="mb-3">
              <textarea class="form-control animate__animated animate__delay-2s" id="comment" rows="4" placeholder="Your Comment*" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary animate__animated animate__delay-3s" id="submitBtn">
              <span id="submitText">Post Comment</span>
              <span id="submitSpinner" class="spinner-border spinner-border-sm d-none"></span>
            </button>
            <div id="formMessage" class="mt-3"></div>
          </form>
        </div>
  
        <!-- Comments List -->
        <div id="commentsList" class="comments-container">
          <div class="text-center py-4">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading comments...</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  
    <!-- Firebase Comment System -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
      import { getDatabase, ref, push, onValue, update } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
      import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
  
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCW5JtYKeVmlZc1UJcc4jI9P2gMi1eWcWE",
        authDomain: "sarvam-ngo.firebaseapp.com",
        databaseURL: "https://sarvam-ngo-default-rtdb.firebaseio.com",
        projectId: "sarvam-ngo",
        storageBucket: "sarvam-ngo.firebasestorage.app",
        messagingSenderId: "167511858038",
        appId: "1:167511858038:web:3b42ff2ef566ae090c3857",
        measurementId: "G-4JXYENFTLC"
      };
  
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
      const auth = getAuth(app);
  
      // DOM elements
      const commentForm = document.getElementById('commentForm');
      const commentsList = document.getElementById('commentsList');
      const submitBtn = document.getElementById('submitBtn');
      const submitText = document.getElementById('submitText');
      const submitSpinner = document.getElementById('submitSpinner');
      const formMessage = document.getElementById('formMessage');
  
      // Emoji reactions configuration
      const emojiReactions = [
        { emoji: '❤️', code: 'heart', color: '#ff6b6b' },
        { emoji: '😂', code: 'joy', color: '#feca57' },
        { emoji: '👍', code: 'thumbsup', color: '#5f27cd' },
        { emoji: '🔥', code: 'fire', color: '#ff9f43' },
        { emoji: '👏', code: 'clap', color: '#1dd1a1' }
      ];
  
      // Initialize comment system
      document.addEventListener('DOMContentLoaded', () => {
        initCommentSystem();
        addInputAnimations();
      });
  
      function addInputAnimations() {
        const inputs = document.querySelectorAll('#name, #email, #comment');
        inputs.forEach(input => {
          // Focus animation
          input.addEventListener('focus', () => {
            input.classList.add('animate__animated', 'animate__pulse');
            setTimeout(() => {
              input.classList.remove('animate__animated', 'animate__pulse');
            }, 1000);
          });
          
          // Hover animation
          input.addEventListener('mouseenter', () => {
            input.classList.add('animate__animated', 'animate__headShake');
            setTimeout(() => {
              input.classList.remove('animate__animated', 'animate__headShake');
            }, 1000);
          });
        });
      }
  
      async function initCommentSystem() {
        try {
          // Sign in anonymously
          const userCredential = await signInAnonymously(auth);
          console.log("Anonymous authentication successful", userCredential.user.uid);
          
          // Load existing comments
          loadComments();
          
          // Set up form submission
          commentForm.addEventListener('submit', handleCommentSubmit);
          
        } catch (error) {
          console.error("Initialization error:", error);
          showMessage("Error initializing comments. Please refresh the page.", "danger");
          commentsList.innerHTML = '<p class="text-danger py-4 animate__animated animate__shakeX">Authentication failed. Please refresh.</p>';
        }
      }
  
      function loadComments() {
        // Changed from 'comments' to 'community/comments'
        const commentsRef = ref(db, 'health/comments');
        
        onValue(commentsRef, (snapshot) => {
          commentsList.innerHTML = '';
          
          if (!snapshot.exists()) {
            commentsList.innerHTML = `
              <p class="text-muted py-4 animate__animated animate__fadeIn">
                No comments yet. Be the first to comment!
              </p>
            `;
            document.getElementById('commentsCount').textContent = "0 Comments";
            return;
          }
          
          const comments = [];
          snapshot.forEach((childSnapshot) => {
            const commentData = childSnapshot.val();
            
            if (commentData.name && commentData.text) {
              comments.push({
                id: childSnapshot.key,
                name: commentData.name,
                text: commentData.text,
                timestamp: commentData.timestamp || Date.now(),
                reactions: commentData.reactions || {}
              });
            }
          });
          
          if (comments.length === 0) {
            commentsList.innerHTML = `
              <p class="text-muted py-4 animate__animated animate__fadeIn">
                No valid comments found.
              </p>
            `;
            document.getElementById('commentsCount').textContent = "0 Comments";
            return;
          }
          
          // Sort by timestamp (newest first)
          comments.sort((a, b) => b.timestamp - a.timestamp);
          
          // Display comments with staggered animations
          comments.forEach((comment, index) => {
            setTimeout(() => {
              const commentElement = createCommentElement(comment);
              commentsList.appendChild(commentElement);
              
              // Add entrance animation
              commentElement.classList.add('animate__animated', 'animate__fadeInUp');
              
              // Remove animation class after it completes to avoid interference
              setTimeout(() => {
                commentElement.classList.remove('animate__animated', 'animate__fadeInUp');
              }, 1000);
            }, index * 100);
          });
          
          // Update comment count with animation
          const countElement = document.getElementById('commentsCount');
          countElement.classList.add('animate__animated', 'animate__rubberBand');
          setTimeout(() => {
            countElement.classList.remove('animate__animated', 'animate__rubberBand');
          }, 1000);
          countElement.textContent = `${comments.length} Comment${comments.length !== 1 ? 's' : ''}`;
            
        }, (error) => {
          console.error("Error loading comments:", error);
          commentsList.innerHTML = `
            <p class="text-danger py-4 animate__animated animate__shakeX">
              Error loading comments. Please try again.
            </p>
          `;
        });
      }
  
      function createCommentElement(comment) {
        const commentElement = document.createElement('div');
        commentElement.className = 'comment mb-4 p-3 bg-white rounded shadow-sm';
        commentElement.dataset.commentId = comment.id;
        
        // Add hover effect
        commentElement.style.transition = 'all 0.3s ease';
        commentElement.addEventListener('mouseenter', () => {
          commentElement.style.transform = 'translateY(-3px)';
          commentElement.style.boxShadow = '0 10px 20px rgba(0,0,0,0.1)';
        });
        commentElement.addEventListener('mouseleave', () => {
          commentElement.style.transform = 'translateY(0)';
          commentElement.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
        });
        
        const date = new Date(comment.timestamp);
        const formattedDate = date.toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'short',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });
        
        // Create avatar from name initial
        const nameInitial = comment.name.charAt(0).toUpperCase();
        const avatarColor = getAvatarColor(comment.name);
        
        commentElement.innerHTML = `
          <div class="d-flex gap-3">
            <div class="flex-shrink-0">
              <div class="avatar rounded-circle d-flex align-items-center justify-content-center" 
                   style="background-color: ${avatarColor}; width: 40px; height: 40px; color: white; font-weight: bold">
                ${nameInitial}
              </div>
            </div>
            <div class="flex-grow-1">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="mb-0 fw-bold">${comment.name}</h6>
                <small class="text-muted">${formattedDate}</small>
              </div>
              <p class="mb-2 mt-2">${comment.text}</p>
              
              <div class="reactions-container d-flex gap-2 mt-3" id="reactions-${comment.id}">
                <!-- Reactions will be inserted here -->
              </div>
            </div>
          </div>
        `;
        
        // Add reactions with animation
        const reactionsContainer = commentElement.querySelector(`#reactions-${comment.id}`);
        emojiReactions.forEach((reaction, index) => {
          setTimeout(() => {
            const reactionElement = createReactionElement(comment.id, reaction, comment.reactions);
            reactionsContainer.appendChild(reactionElement);
            
            // Add entrance animation
            reactionElement.classList.add('animate__animated', 'animate__zoomIn');
            setTimeout(() => {
              reactionElement.classList.remove('animate__animated', 'animate__zoomIn');
            }, 1000);
          }, index * 150);
        });
        
        return commentElement;
      }
  
      function createReactionElement(commentId, reaction, reactionsData) {
        const userId = auth.currentUser?.uid;
        const hasReacted = userId && reactionsData && reactionsData[reaction.code] && reactionsData[reaction.code].users && reactionsData[reaction.code].users[userId];
        const reactionCount = reactionsData && reactionsData[reaction.code] ? reactionsData[reaction.code].count || 0 : 0;
        
        const reactionElement = document.createElement('div');
        reactionElement.className = `reaction-btn d-flex align-items-center gap-1 ${hasReacted ? 'reacted' : ''}`;
        reactionElement.innerHTML = `
          <span class="emoji">${reaction.emoji}</span>
          <span class="count">${reactionCount}</span>
        `;
        
        // Add hover animation
        reactionElement.addEventListener('mouseenter', () => {
          reactionElement.classList.add('animate__animated', 'animate__tada');
          setTimeout(() => {
            reactionElement.classList.remove('animate__animated', 'animate__tada');
          }, 1000);
        });
        
        reactionElement.addEventListener('click', () => {
          reactionElement.classList.add('animate__animated', 'animate__bounce');
          setTimeout(() => {
            reactionElement.classList.remove('animate__animated', 'animate__bounce');
          }, 1000);
          handleReaction(commentId, reaction.code, hasReacted);
        });
        
        return reactionElement;
      }
  
      async function handleReaction(commentId, reactionCode, hasReacted) {
        const userId = auth.currentUser?.uid;
        if (!userId) {
          showMessage("Please wait while we authenticate you", "info");
          return;
        }
        
        try {
          const updates = {};
          // Updated path to include 'community'
          const reactionPath = `health/comments/${commentId}/reactions/${reactionCode}`;
          
          if (hasReacted) {
            // Remove reaction
            updates[`${reactionPath}/count`] = increment(-1);
            updates[`${reactionPath}/users/${userId}`] = null;
          } else {
            // Add reaction
            updates[`${reactionPath}/count`] = increment(1);
            updates[`${reactionPath}/users/${userId}`] = true;
          }
          
          await update(ref(db), updates);
          
        } catch (error) {
          console.error("Error updating reaction:", error);
          showMessage("Error updating reaction. Please try again.", "danger");
        }
      }
  
      function increment(value) {
        return {
          '.sv': {
            'increment': value
          }
        };
      }
  
      async function handleCommentSubmit(e) {
        e.preventDefault();
        
        const name = document.getElementById('name').value.trim();
        const comment = document.getElementById('comment').value.trim();
        
        if (!name || !comment) {
          showMessage("Please fill in all required fields", "warning");
          
          // Add shake animation to empty fields
          if (!name) {
            const nameField = document.getElementById('name');
            nameField.classList.add('animate__animated', 'animate__headShake');
            setTimeout(() => nameField.classList.remove('animate__animated', 'animate__headShake'), 1000);
          }
          if (!comment) {
            const commentField = document.getElementById('comment');
            commentField.classList.add('animate__animated', 'animate__headShake');
            setTimeout(() => commentField.classList.remove('animate__animated', 'animate__headShake'), 1000);
          }
          
          return;
        }
  
        // Show loading state with animation
        submitBtn.disabled = true;
        submitText.textContent = "Posting...";
        submitSpinner.classList.remove('d-none');
        submitBtn.classList.add('animate__animated', 'animate__pulse');
        
        try {
          const newComment = {
            name: name,
            text: comment,
            timestamp: Date.now(),
            reactions: {}
          };
          
          // Updated path to include 'community'
          await push(ref(db, 'health/comments'), newComment);
          
          // Clear form
          commentForm.reset();
          
          // Success animation
          submitBtn.classList.remove('animate__pulse');
          submitBtn.classList.add('animate__bounce');
          setTimeout(() => {
            submitBtn.classList.remove('animate__animated', 'animate__bounce');
          }, 1000);
          
          showMessage("Comment posted successfully!", "success");
          
          // Scroll to the new comment (it will appear with animation)
          setTimeout(() => {
            const firstComment = commentsList.querySelector('.comment');
            if (firstComment) {
              firstComment.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
          }, 500);
          
        } catch (error) {
          console.error("Error posting comment:", error);
          
          // Error animation
          submitBtn.classList.remove('animate__pulse');
          submitBtn.classList.add('animate__shakeX');
          setTimeout(() => {
            submitBtn.classList.remove('animate__animated', 'animate__shakeX');
          }, 1000);
          
          showMessage("Error posting comment. Please try again.", "danger");
        } finally {
          // Reset button state
          submitBtn.disabled = false;
          submitText.textContent = "Post Comment";
          submitSpinner.classList.add('d-none');
          submitBtn.classList.remove('animate__animated', 'animate__pulse');
        }
      }
  
      function getAvatarColor(name) {
        const colors = [
          '#4e54c8', '#8f94fb', '#6a11cb', '#2575fc', 
          '#1488cc', '#11998e', '#38ef7d', '#a8ff78'
        ];
        const hash = name.split('').reduce((acc, char) => char.charCodeAt(0) + acc, 0);
        return colors[hash % colors.length];
      }
  
      function showMessage(text, type) {
        formMessage.innerHTML = `
          <div class="alert alert-${type} alert-dismissible fade show animate__animated animate__fadeIn">
            ${text}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        `;
        
        // Auto-dismiss after 5 seconds with animation
        setTimeout(() => {
          const alert = formMessage.querySelector('.alert');
          if (alert) {
            alert.classList.add('animate__fadeOut');
            setTimeout(() => {
              const bsAlert = new bootstrap.Alert(alert);
              bsAlert.close();
            }, 500);
          }
        }, 5000);
      }
    </script>
  
    <!-- Required Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  
    <style>
      /* Base Styles */
      .reaction-btn {
        padding: 4px 8px;
        border-radius: 20px;
        background-color: #f1f2f6;
        cursor: pointer;
        transition: all 0.2s;
        user-select: none;
        transform: scale(1);
      }
      
      .reaction-btn:hover {
        background-color: #dfe4ea;
        transform: scale(1.1);
      }
      
      .reaction-btn.reacted {
        background-color: #e8f4fd;
        transform: scale(1.1);
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
      }
      
      .reaction-btn .emoji {
        font-size: 1.1rem;
        display: inline-block;
        transition: all 0.3s ease;
      }
      
      .reaction-btn:hover .emoji {
        transform: scale(1.3);
      }
      
      .reaction-btn .count {
        font-size: 0.8rem;
        font-weight: 500;
        transition: all 0.3s ease;
      }
      
      /* Comment animations */
      .comment {
        transition: all 0.3s ease;
        opacity: 1;
      }
      
      .comment.animate__fadeInUp {
        animation-duration: 0.5s;
      }
      
      /* Form animations */
      #name.animate__animated, #email.animate__animated, #comment.animate__animated {
        animation-duration: 0.5s;
      }
      
      /* Button animations */
      #submitBtn.animate__pulse {
        animation-duration: 1s;
        animation-iteration-count: infinite;
      }
      
      /* Avatar animation */
      .avatar {
        transition: all 0.3s ease;
      }
      
      .avatar:hover {
        transform: rotate(15deg) scale(1.2);
      }
      
      /* Floating animation for comments count */
      .comments-count {
        display: inline-block;
        position: relative;
      }
      
      .comments-count::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 2px;
        bottom: -5px;
        left: 0;
        background-color: #0d6efd;
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }
      
      .comments-count:hover::after {
        transform: scaleX(1);
      }
      
      /* Textarea focus effect */
      #comment:focus {
        animation: textareaFocus 1.5s infinite alternate;
      }
      
      @keyframes textareaFocus {
        from {
          box-shadow: 0 0 5px rgba(13, 110, 253, 0.5);
        }
        to {
          box-shadow: 0 0 15px rgba(13, 110, 253, 0.8);
        }
      }
      
      /* Pulse effect for new comments */
      @keyframes pulseGlow {
        0% {
          box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(13, 110, 253, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(13, 110, 253, 0);
        }
      }
      
      .new-comment {
        animation: pulseGlow 2s;
      }
      
      /* Floating reaction buttons */
      .reaction-btn {
        position: relative;
        top: 0;
        transition: top 0.3s ease;
      }
      
      .reaction-btn:hover {
        top: -3px;
      }
    </style>
  </body>
  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <script>
    // Initialize AOS animation
    AOS.init({
      duration: 800,
      easing: 'ease-in-out',
      once: true
    });
    
    // Scroll animation for elements
    const animateElements = document.querySelectorAll('.animate-on-scroll');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1
    });
    
    animateElements.forEach(element => {
      observer.observe(element);
    });
    
    // Animated counter
    const counters = document.querySelectorAll('.stat-number');
    const speed = 200;
    
    counters.forEach(counter => {
      const updateCount = () => {
        const target = +counter.getAttribute('data-count') || +counter.innerText.replace('+','');
        const count = +counter.innerText.replace('+','');
        const increment = target / speed;
        
        if (count < target) {
          counter.innerText = Math.ceil(count + increment) + (counter.innerText.includes('+') ? '+' : '');
          setTimeout(updateCount, 1);
        } else {
          counter.innerText = target + (counter.innerText.includes('+') ? '+' : '');
        }
      };
      
      window.addEventListener('scroll', function() {
        const position = counter.getBoundingClientRect().top;
        const screenPosition = window.innerHeight / 1.3;
        
        if (position < screenPosition) {
          updateCount();
        }
      }, { passive: true });
    });
  </script>
</body>
</html>